<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Folder Animation</title>
  <style>
    body {
      background: #111;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      margin: 0;
    }

    /* Wrapper for responsive scaling */
    .icon-wrapper {
      width: 80vw;           /* responsive width */
      max-width: 300px;      /* cap on desktop */
      aspect-ratio: 525 / 400; /* keeps shape */
    }

    .icon {
      width: 525px;   /* actual frame width */
      height: 400px;  /* actual frame height */
      background: url("folder-sprite.png") no-repeat 0 0;
      cursor: pointer;
      overflow: hidden;

      /* Scale down to fit wrapper */
      transform-origin: top left;
      transform: scale(var(--icon-scale, 1));
    }

    /* Frames with fixed pixel offsets (still work) */
    .frame1 { background-position:    0px 0; }
    .frame2 { background-position: -575px 0; }
    .frame3 { background-position: -1150px 0; }
    .frame4 { background-position: -1725px 0; }
    .frame5 { background-position: -2300px 0; }
  </style>
</head>
<body>
  <div class="icon-wrapper">
    <div class="icon frame1" id="folder"></div>
  </div>

  <script>
    const folder = document.getElementById("folder");
    const wrapper = folder.parentElement;
    const frames = ["frame1", "frame2", "frame3", "frame4", "frame5"];
    let animating = false;

    function setFrame(index) {
      folder.className = "icon " + frames[index];
    }

    function animateFrames(forward = true) {
      if (animating) return;
      animating = true;

      let i = forward ? 0 : frames.length - 1;
      const interval = setInterval(() => {
        setFrame(i);
        i = forward ? i + 1 : i - 1;

        if (i >= frames.length || i < 0) {
          clearInterval(interval);
          animating = false;
        }
      }, 40);
    }

    // Responsive scaling: calculate scale based on wrapper size
    function resizeIcon() {
      const scale = wrapper.clientWidth / 525;
      folder.style.setProperty("--icon-scale", scale);
    }

    window.addEventListener("resize", resizeIcon);
    resizeIcon(); // run once on load

    // Hover → open
    folder.addEventListener("mouseenter", () => animateFrames(true));
    // Hover out → close
    folder.addEventListener("mouseleave", () => animateFrames(false));
    // Click → redirect (works on mobile)
    folder.addEventListener("click", () => {
      window.open("https://halo.forgebunker.com", "_self");
    });
  </script>
</body>
</html>
